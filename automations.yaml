- id: loopback
  alias: Loop back test
  trigger:
  - minutes: /1
    platform: time
    seconds: 0
  action: []

- id: led_strip
  alias: TV Backlight
  initial_state: true
  hide_entity: false
  trigger:
  - platform: state
    entity_id: input_slider.porch_animation_speed
  action:
  - service: mqtt.publish
    data_template:
      topic: bruh/porch/set
      payload: '{"transition":{{ trigger.to_state.state | int }}}'

- id: weekday_alarm
  alias: Week day alarm automation
  trigger:
  - minutes: /1
    platform: time
    seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.alarmweekon
    state: 'on'
  - condition: state
    entity_id: input_boolean.alarmweekday
    state: 'on'
  - condition: time
    weekday:
    - mon
    - tue
    - wed
    - thu
    - fri
  - condition: template
    value_template: '{{ now().strftime("%H:%M") == states.sensor.alarm_time.state
      }}'
  action:
  - data:
      message: Good morning!
    service: notify.notify
  - alias: Volume UP kodi
    data:
      entity_id: media_player.kodi
      volume_level: '1.0'
    service: media_player.volume_set
  - alias: PLAY lrt
    data:
      entity_id: media_player.kodi
      item:
        channelid: 2
      method: Player.Open
    service: media_player.kodi_call_method
- id: weekend_alarm
  alias: Weekend alarm automation
  trigger:
  - minutes: /1
    platform: time
    seconds: 0
  condition:
  - condition: state
    entity_id: input_boolean.alarmweekon
    state: 'on'
  - condition: state
    entity_id: input_boolean.alarmweekday
    state: 'off'
  - condition: time
    weekday:
    - sat
    - sun
  - condition: template
    value_template: '{{ now().strftime("%H:%M") == states.sensor.alarm_time.state
      }}'
  action:
  - data:
      message: Good morning!
    service: notify.notify
  - alias: Play rain
    data:
      entity_id: media_player.kodi
      media_content_id: plugin://plugin.video.youtube/?path=/root/video&action=play_video&videoid=x1Nx-tmuHNY
      media_content_type: video
    service: media_player.play_media
  - alias: Volume up kodi
    data:
      entity_id: media_player.kodi
      volume_level: '1.0'
    service: media_player.volume_set

# Homekit scenes

- id: good_morning
  alias: Good Morning Automation
  trigger:
  - entity_id: input_boolean.good_morning
    platform: state
    to: 'on'
  action:
    - service: script.turn_on
      data:
        entity_id: script.wakeup

- id: leave_home
  alias: Leave Home Automation
  trigger:
  - entity_id: input_boolean.leave_home
    platform: state
    to: 'on'
  action:
    - service: script.turn_on
      data:
        entity_id: script.leaving_home

- id: arrive_home
  alias: Arrive Home Automation
  trigger:
  - entity_id: input_boolean.arrive_home
    platform: state
    to: 'on'
  action:
    - service: script.turn_on
      data:
        entity_id: script.welcome_home

- id: good_night_auto
  alias: Goodnight world
  trigger:
  - entity_id: input_boolean.enable_night_music
    platform: state
    to: 'on'
  action:
    - service: script.turn_on
      data:
        entity_id: script.good_night
